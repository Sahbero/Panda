<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sevimli Panda Atlayışı</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            font-family: sans-serif;
            color: #333;
        }
        canvas {
            border: 2px solid #333;
            background-color: #87CEEB; /* Gökyüzü mavisi */
        }
        #game-info {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="480" height="640"></canvas>
    <div id="game-info">Puan: 0</div>

    <script>
        // --- Oyun Sabitleri ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const GAME_WIDTH = canvas.width;
        const GAME_HEIGHT = canvas.height;
        const INFO_DISPLAY = document.getElementById('game-info');

        // --- Renkler ---
        const PANDA_COLOR = 'rgb(255, 105, 180)';
        const PLATFORM_COLOR = 'rgb(139, 69, 19)';

        // --- Oyun Değişkenleri ---
        let panda = {
            x: GAME_WIDTH / 2,
            y: GAME_HEIGHT - 50,
            width: 30,
            height: 30,
            velocityY: 0,
            gravity: 0.5,
            jumpStrength: -12,
            isJumping: false
        };

        let platforms = [];
        let score = 0;
        let isGameOver = false;

        // --- Platform Oluşturma Fonksiyonu ---
        function createPlatforms() {
            platforms.push({ x: GAME_WIDTH / 2 - 50, y: GAME_HEIGHT - 50, width: 100, height: 20 });

            for (let i = 0; i < 10; i++) {
                const lastPlatform = platforms[platforms.length - 1];
                const newY = lastPlatform.y - Math.floor(Math.random() * (100 - 60 + 1) + 60);
                const newX = Math.random() * (GAME_WIDTH - 80);
                platforms.push({ x: newX, y: newY, width: 80, height: 20 });
            }
        }

        // --- Çizim Fonksiyonları ---
        function drawPanda() {
            ctx.fillStyle = PANDA_COLOR;
            ctx.fillRect(panda.x, panda.y, panda.width, panda.height);
        }

        function drawPlatforms() {
            ctx.fillStyle = PLATFORM_COLOR;
            platforms.forEach(platform => {
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
            });
        }

        function drawScore() {
            INFO_DISPLAY.innerText = `Puan: ${score}`;
        }

        // --- Oyun Mantığı Güncelleme ---
        function update() {
            if (isGameOver) {
                return;
            }

            // Pandayı hareket ettir
            panda.velocityY += panda.gravity;
            panda.y += panda.velocityY;

            // Platformlarla çarpışma kontrolü
            platforms.forEach(platform => {
                // Eğer panda düşüyorsa ve platformla temas ederse
                if (panda.velocityY > 0 &&
                    panda.y + panda.height >= platform.y &&
                    panda.y + panda.height <= platform.y + platform.height &&
                    panda.x + panda.width > platform.x &&
                    panda.x < platform.x + platform.width) {
                    
                    panda.velocityY = 0;
                    panda.y = platform.y - panda.height;
                    panda.isJumping = false;
                }
            });

            // Ekranı kaydırma mantığı
            if (panda.y < GAME_HEIGHT / 4) {
                const scrollSpeed = GAME_HEIGHT / 4 - panda.y;
                panda.y += scrollSpeed;
                score += Math.floor(scrollSpeed);

                platforms.forEach(platform => {
                    platform.y += scrollSpeed;
                });
            }
            
            // Ekrandan çıkan platformları sil ve yenilerini oluştur
            while (platforms[0].y > GAME_HEIGHT) {
                platforms.shift();
                const lastPlatform = platforms[platforms.length - 1];
                const newY = lastPlatform.y - Math.floor(Math.random() * (100 - 60 + 1) + 60);
                const newX = Math.random() * (GAME_WIDTH - 80);
                platforms.push({ x: newX, y: newY, width: 80, height: 20 });
            }

            // Oyun bitti mi kontrolü
            if (panda.y > GAME_HEIGHT) {
                isGameOver = true;
                alert(`Oyun Bitti! Puanınız: ${score}`);
                document.location.reload(); // Sayfayı yenileyerek oyunu tekrar başlat
            }
        }
        
        // --- Oyun Döngüsü ---
        function gameLoop() {
            ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
            
            update();
            drawPlatforms();
            drawPanda();
            drawScore();
            
            requestAnimationFrame(gameLoop);
        }

        // --- Kontroller ---
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && !panda.isJumping) {
                panda.velocityY = panda.jumpStrength;
                panda.isJumping = true;
            }
        });

        // --- Oyunu Başlat ---
        createPlatforms();
        gameLoop();
    </script>
</body>
</html>
